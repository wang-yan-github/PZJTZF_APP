<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APP 后台管理</title>
    <script>
        /*if(sessionStorage.getItem("user") === null){
         window.location="login.html";
         }*/
    </script>

    <script src="js/api/jquery-1.9.1.min.js"></script>
    <script src="js/api/PZ_liuliangfx.js"></script>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body class="">
<!-- 左侧导航 -->
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle" src="img/profile_small.jpg" />
                             </span>
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear">
                                <span class="block m-t-xs" id="userprofile">
                                <strong class="font-bold" >admin</strong>
                             </span>
                                <span class="text-muted text-xs block">管理员 <b class="caret"></b></span> </span> </a>
                        <ul class="dropdown-menu animated fadeInRight m-t-xs">
                            <li><a href="login.html">登出</a></li>
                        </ul>
                    </div>
                    <div class="logo-element">
                        IN+
                    </div>
                </li>
                <li class="active">
                    <a href="PZ_liuliangfx.html"><i class="fa fa-line-chart"></i> <span class="nav-label">流量分析</span></a>
                </li>
                <li>
                    <a href="PZ_shouyegl.html"><i class="fa fa-newspaper-o"></i> <span class="nav-label">首页管理</span></a>
                </li>
                <li>
                    <a href="PZ_zhidugl.html"><i class="fa fa-archive"></i> <span class="nav-label">各项制度管理</span></a>
                </li>
                <li>
                    <a href="PZ_banshilc.html"><i class="fa fa-file"></i> <span class="nav-label">办事流程管理</span></a>
                </li>
                <li>
                    <a href="PZ_zhutizr.html"><i class="fa fa-institution"></i> <span class="nav-label">主体责任管理</span></a>
                </li>
                <li>
                    <a href="PZ_zhifajiuj.html"><i class="fa fa-handshake-o"></i> <span class="nav-label">执法救济管理</span></a>
                </li>
                <li>
                    <a href="PZ_zhifayj.html"><i class="fa fa-book"></i> <span class="nav-label">执法依据管理</span></a>
                </li>
                <li>
                    <a href="PZ_zhifaqx.html"><i class="fa fa-gavel"></i> <span class="nav-label">执法权限管理</span></a>
                </li>
                <li>
                    <a href="PZ_zhifajg.html"><i class="fa fa-edit"></i> <span class="nav-label">执法结果管理</span></a>
                </li>


            </ul>

        </div>
    </nav>
    <!-- 以上为导航条 -->



    <div id="page-wrapper" class="gray-bg">

        <div class="row border-bottom">
            <nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary ">
                        <h3>APP 后台管理</h3>
                    </a>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> Log out
                        </a>
                    </li>
                </ul>

            </nav>
        </div>

        <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-lg-10">
                <h2>后台管理系统</h2>
                <ol class="breadcrumb">
                    <li>
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a>流量分析</a>
                    </li>
                </ol>
            </div>
        </div>


        <div class="row">
            <div class="col-lg-3">
                <div class="widget style1 navy-bg">
                    <div class="row">
                        <div class="col-xs-4">
                            <i class="fa fa-user-o fa-5x"></i>
                        </div>
                        <div class="col-xs-8 text-right">
                            <span> 今日访问次数 </span>
                            <h2 class="font-bold" id="jinri"></h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="widget style1 lazur-bg">
                    <div class="row">
                        <div class="col-xs-4">
                            <i class="fa fa-user-o fa-5x"></i>
                        </div>
                        <div class="col-xs-8 text-right">
                            <span> 累计访问次数 </span>
                            <h2 class="font-bold" id="leiji"></h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="widget style1 yellow-bg">
                    <div class="row">
                        <div class="col-xs-4">
                            <i class="fa fa-thumbs-up fa-5x"></i>
                        </div>
                        <div class="col-xs-8 text-right">
                            <span> 访问最多内容 </span>
                            <h2 class="font-bold" id="topName"></h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="widget style1 red-bg">
                    <div class="row">
                        <div class="col-xs-4">
                            <i class="fa fa-search fa-5x"></i>
                        </div>
                        <div class="col-xs-8 text-right">
                            <span> 搜索最多 </span>
                            <h2 class="font-bold" id="guanjianzicontent"></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>各版块访问量</h5>
                        <div class="pull-right">
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div>
                            <canvas id="barChart1" height="140"></canvas>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-lg-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>访问量最多内容TOP5</h5>
                    </div>
                    <div class="ibox-content">
                        <div>
                            <canvas id="barChart" height="140"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>搜索关键词</h5>
                    </div>
                    <div class="ibox-content">
                        <div>
                            <canvas id="doughnutChart" height="140"></canvas>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="footer">
            <div class="pull-right">
                10GB of <strong>250GB</strong> Free.
            </div>
            <div>
                <strong>Copyright</strong> Example Company &copy; 2014-2017
            </div>
        </div>

    </div>
</div>
<input type="hidden" id="label1"/>


<!-- Mainly scripts -->
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="js/inspinia.js"></script>
<script src="js/plugins/pace/pace.min.js"></script>


<!-- ChartJS-->
<script src="js/plugins/chartJs/Chart.min.js"></script>



<script>
    $(function () {

        $.ajaxSettings.async = false;// (同步执行)

        // 今日访问次数 累计访问次数
        $.getJSON("http://47.94.92.201:8080/API/FangWenAction?choice=find", function(data) {
            //for in循环
            for(x in data){
                //x表示是下标，来指定变量，指定的变量可以是数组元素，也可以是对象的属性。
                $("#jinri").text(data[x].jinri);
                $("#leiji").text(data[x].leiji);
            }
        });

        // 搜索最多
        var doughnutData;
        $.getJSON("http://47.94.92.201:8080/API/GuanJianZiAction?choice=sum", function(data) {
            $("#guanjianzicontent").text(data[0][0]);
            //for in循环
            doughnutData = {
                labels: [data[0][0],data[1][0],data[2][0],data[3][0],data[4][0] ],
                datasets: [{
                    data: [data[0][1],data[1][1],data[2][1],data[3][1],data[4][1]],
                    backgroundColor: ["#a3e1d4","#dedede","#b5b8cf","#a3e1d4"]
                }]
            } ;
        });

        var barData;
        var barData1;

        //  各版块访问量
        $.getJSON("http://47.94.92.201:8080/API/LiuLiangAction?choice=sum", function(data) {
            barData1 = {
                labels: [data[0].type,data[1].type,data[2].type,data[3].type,data[4].type,data[5].type,data[6].type,],
                datasets: [
                    {
                        label: "访问次数",
                        backgroundColor: 'rgba(26,179,148,0.5)',
                        borderColor: "rgba(26,179,148,0.1)",
                        pointBackgroundColor: "rgba(26,179,148,0.1)",
                        pointBorderColor: "#fff",
                        data: [data[0].number,data[1].number,data[2].number,data[3].number,data[4].number,data[5].number,data[6].number,]
                    },
                ]
            };
        });

        // 访问量最多内容TOP5
        $.getJSON("http://47.94.92.201:8080/API/LiuLiangAction?choice=find", function(data) {
            $("#topName").text(data[0].name);
            barData = {
                labels: [data[0].name,data[1].name,data[2].name,data[3].name,data[4].name],
                datasets: [
                    {
                        label: "访问次数",
                        backgroundColor: 'rgba(26,179,148,0.5)',
                        borderColor: "rgba(26,179,148,0.7)",
                        pointBackgroundColor: "rgba(26,179,148,1)",
                        pointBorderColor: "#fff",
                        data: [data[0].number,data[1].number,data[2].number,data[3].number,data[4].number]
                    }
                ]
            };
        });

        var barOptions = {
            responsive: true
        };


        var ctx2 = document.getElementById("barChart").getContext("2d");
        new Chart(ctx2, {type: 'horizontalBar', data: barData, options: barOptions});



        /*        var barData1 = {
         labels: ["各项制度", "主体责任", "执法依据", "办事流程", "执法权限", "执法救济", "执法结果"],
         datasets: [
         {
         label: "访问次数",
         backgroundColor: 'rgba(26,179,148,0.5)',
         borderColor: "rgba(26,179,148,0.1)",
         pointBackgroundColor: "rgba(26,179,148,0.1)",
         pointBorderColor: "#fff",
         data: [28, 45, 50, 70, 40, 30, 90]
         },
         ]
         };*/

        var barOptions1 = {
            responsive: true
        };

        var ctx1 = document.getElementById("barChart1").getContext("2d");
        new Chart(ctx1, {type: 'bar', data: barData1, options:barOptions1});

        var doughnutOptions = {
            responsive: true
        };

        var ctx4 = document.getElementById("doughnutChart").getContext("2d");
        new Chart(ctx4, {type: 'doughnut', data: doughnutData, options:doughnutOptions});

    });

</script>

</body>

</html>
